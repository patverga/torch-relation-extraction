predictionFile=$1
exampleDir=$2
##warning: the outReport must be a absolute path
outReport=$3
tmpdir=`mktemp -d`

mkdir -p $tmpdir/out/run2013
echo computing performance for $predictionFile
echo example dir = $exampleDir
for fn in query.xml query_expanded.xml
do
f=$exampleDir/$fn
cp  $f $tmpdir/out/run2013/$fn
done

ln -s $predictionFile $tmpdir/out/run2013/predictions_classifier_david
rm -f $tmpdir/out/run2013/makefile
rm -f $tmpdir/out/run2013/log4j.txt
cd $tmpdir
source /iesl/canvas/belanger/relationfactory/myEvaluation/setupPaths  $PWD/out/



echo working in $PWD

echo ISOLATED PERFORMANCE | tee $outReport
/iesl/canvas/belanger/relationfactory/bin/run.sh /iesl/canvas/belanger/relationfactory/myEvaluation/system2013_isolated.config
echo sh /home/pat/canvas/universal-schema/univSchema/torch/david-evaluation/evaluateOutput-es-train $PWD/out/run2013/response_classifier_david_pp13 
sh /home/pat/canvas/universal-schema/univSchema/torch/david-evaluation/evaluateOutput-es-train $PWD/out/run2013/response_classifier_david_pp13 | tee -a $outReport

#echo 
#echo COMBINATION PERFORMANCE NO SVM| tee -a $outReport
#/iesl/canvas/belanger/relationfactory/bin/run.sh /iesl/canvas/belanger/relationfactory/myEvaluation/system2013_nosvm.config
#sh /iesl/canvas/belanger/relationfactory/myEvaluation/evaluateOutput $PWD/out/run2013/response_fast_david_nosvm_pp12 | tee -a $outReport

#echo COMBINATION PERFORMANCE | tee -a $outReport
#/iesl/canvas/belanger/relationfactory/bin/run.sh /iesl/canvas/belanger/relationfactory/myEvaluation/system2013_all.config
#sh /iesl/canvas/belanger/relationfactory/myEvaluation/evaluateOutput $PWD/out/run2013/response_fast_david_pp12 | tee -a $outReport



rm -rf $tmpdir

